# ğŸ›¡ï¸ VIBE SECURITY SUMMARY
# Otomatik Ã¼retildi: 25.02.2026 22:37:44
# Bu dosyayÄ± AI araÃ§larÄ±na (Cursor, Copilot, vb.) context olarak verin.

## ğŸ“Š PROJE GÃœVENLÄ°K DURUMU
ğŸš¨ DURUM: KRÄ°TÄ°K â€” 12 kritik, 7 uyarÄ±, 5 bilgi

## ğŸ“œ ZORUNLU GÃœVENLÄ°K KURALLARI

### 1. Ã‡EVRE DEÄÄ°ÅKENLERÄ°
- NEXT_PUBLIC_ Ã¶neki SADECE istemci tarafÄ±nda gÃ¼venli deÄŸerler iÃ§in kullanÄ±lÄ±r.
- SUPABASE_SERVICE_ROLE_KEY, DATABASE_URL, *_SECRET, *_PRIVATE_KEY â†’ ASLA NEXT_PUBLIC_ ile kullanÄ±lmaz.
- âš ï¸ Ä°FÅA EDÄ°LEN: NEXT_PUBLIC_SUPABASE_SERVICE_ROLE_KEY, NEXT_PUBLIC_DATABASE_URL, NEXT_PUBLIC_JWT_SECRET, NEXT_PUBLIC_API_SECRET, NEXT_PUBLIC_STRIPE_SECRET_KEY, NEXT_PUBLIC_SMTP_PASSWORD, NEXT_PUBLIC_SERPER_API_KEY, NEXT_PUBLIC_OPENAI_API_KEY

### 2. SUPABASE RLS
- Bu projede RLS ZORUNLUDUR.
- Her tabloda auth.uid() bazlÄ± politikalar olmalÄ±dÄ±r.
- KullanÄ±lan tablolar: users, posts, comments, user_settings, private_messages

### 3. SQL INJECTION
- Template literal (${}) ile SQL OLUÅTURULMAZ.
- String concatenation (+) ile SQL OLUÅTURULMAZ.
- Parametreli sorgular ZORUNLUDUR.

### 4. API ANAHTARI GÃœVENLÄ°ÄÄ°
- Serper.dev, OpenAI, Anthropic, Google AI â†’ SADECE sunucu tarafÄ±nda.
- Ä°stemci tarafÄ±ndan eriÅŸim: API Route (/api/*) proxy ile.
- "use client" dosyalarÄ±nda bu servislere doÄŸrudan eriÅŸim YASAKTIR.

## ğŸ—ï¸ MÄ°MARÄ°
- Next.js App Router
- Hassas iÅŸlemler â†’ Server Components, API Routes, Server Actions
- Ä°stemci â†’ Sadece UI rendering
- VeritabanÄ± â†’ RLS korumalÄ± Supabase client
- Harici API â†’ /api/* proxy

## ğŸš¨ AKTÄ°F SORUNLAR
ğŸ”´ [CRITICAL] ğŸš¨ GÃœVENLÄ°K RÄ°SKÄ°: 'NEXT_PUBLIC_SUPABASE_SERVICE_ROLE_KEY' istemci tarafÄ±na ifÅŸa ediliyor! â†’ .env.local:11
ğŸ”´ [CRITICAL] ğŸš¨ GÃœVENLÄ°K RÄ°SKÄ°: 'NEXT_PUBLIC_DATABASE_URL' istemci tarafÄ±na ifÅŸa ediliyor! â†’ .env.local:17
ğŸ”´ [CRITICAL] ğŸš¨ GÃœVENLÄ°K RÄ°SKÄ°: 'NEXT_PUBLIC_JWT_SECRET' istemci tarafÄ±na ifÅŸa ediliyor! â†’ .env.local:20
ğŸ”´ [CRITICAL] ğŸš¨ GÃœVENLÄ°K RÄ°SKÄ°: 'NEXT_PUBLIC_JWT_SECRET' istemci tarafÄ±na ifÅŸa ediliyor! â†’ .env.local:20
ğŸ”´ [CRITICAL] ğŸš¨ GÃœVENLÄ°K RÄ°SKÄ°: 'NEXT_PUBLIC_API_SECRET' istemci tarafÄ±na ifÅŸa ediliyor! â†’ .env.local:23
ğŸ”´ [CRITICAL] ğŸš¨ GÃœVENLÄ°K RÄ°SKÄ°: 'NEXT_PUBLIC_API_SECRET' istemci tarafÄ±na ifÅŸa ediliyor! â†’ .env.local:23
ğŸ”´ [CRITICAL] ğŸš¨ GÃœVENLÄ°K RÄ°SKÄ°: 'NEXT_PUBLIC_STRIPE_SECRET_KEY' istemci tarafÄ±na ifÅŸa ediliyor! â†’ .env.local:26
ğŸ”´ [CRITICAL] ğŸš¨ GÃœVENLÄ°K RÄ°SKÄ°: 'NEXT_PUBLIC_STRIPE_SECRET_KEY' istemci tarafÄ±na ifÅŸa ediliyor! â†’ .env.local:26
ğŸ”´ [CRITICAL] ğŸ’‰ SQL INJECTION RÄ°SKÄ°: supabase.rpc() iÃ§inde template literal â†’ src\lib\test-security-cases.ts:21
ğŸ”´ [CRITICAL] ğŸ’‰ SQL INJECTION RÄ°SKÄ°: Ham SQL'de template literal â†’ src\lib\test-security-cases.ts:27
ğŸ”´ [CRITICAL] ğŸ”‘ Serper.dev API anahtarÄ± NEXT_PUBLIC_ ile ifÅŸa ediliyor! â†’ .env.local:35
ğŸ”´ [CRITICAL] ğŸ”‘ OpenAI API anahtarÄ± NEXT_PUBLIC_ ile ifÅŸa ediliyor! â†’ .env.local:38
ğŸŸ¡ [WARNING] ğŸš¨ GÃœVENLÄ°K RÄ°SKÄ°: 'NEXT_PUBLIC_SMTP_PASSWORD' istemci tarafÄ±na ifÅŸa ediliyor! â†’ .env.local:32
ğŸŸ¡ [WARNING] ğŸš¨ GÃœVENLÄ°K RÄ°SKÄ°: 'NEXT_PUBLIC_SMTP_PASSWORD' istemci tarafÄ±na ifÅŸa ediliyor! â†’ .env.local:32
ğŸŸ¡ [WARNING] ğŸ”‘ Serper.dev istemci tarafÄ± kodda referans ediliyor! â†’ src/lib/test-security-cases.ts:45
ğŸŸ¡ [WARNING] ğŸ”‘ Serper.dev istemci tarafÄ± kodda referans ediliyor! â†’ src/lib/test-security-cases.ts:47
ğŸŸ¡ [WARNING] ğŸ”‘ Serper.dev istemci tarafÄ± kodda referans ediliyor! â†’ src/lib/test-security-cases.ts:50
ğŸŸ¡ [WARNING] ğŸ”‘ OpenAI istemci tarafÄ± kodda referans ediliyor! â†’ src/lib/test-security-cases.ts:63
ğŸŸ¡ [WARNING] ğŸ”‘ OpenAI istemci tarafÄ± kodda referans ediliyor! â†’ src/lib/test-security-cases.ts:60
ğŸ”µ [INFO] ğŸ“‹ 'users' tablosu kullanÄ±lÄ±yor â€” RLS durumu kontrol edilmeli â†’ src\lib\test-security-cases.ts:39, src\lib\test-supabase-queries.ts:34
ğŸ”µ [INFO] ğŸ“‹ 'posts' tablosu kullanÄ±lÄ±yor â€” RLS durumu kontrol edilmeli â†’ src\lib\test-supabase-queries.ts:27
ğŸ”µ [INFO] ğŸ“‹ 'comments' tablosu kullanÄ±lÄ±yor â€” RLS durumu kontrol edilmeli â†’ src\lib\test-supabase-queries.ts:44
ğŸ”µ [INFO] ğŸ“‹ 'user_settings' tablosu kullanÄ±lÄ±yor â€” RLS durumu kontrol edilmeli â†’ src\lib\test-supabase-queries.ts:52
ğŸ”µ [INFO] ğŸ“‹ 'private_messages' tablosu kullanÄ±lÄ±yor â€” RLS durumu kontrol edilmeli â†’ src\lib\test-supabase-queries.ts:61

## ğŸ“ HAZIR SQL REÃ‡ETELERÄ°
```sql
-- ğŸ›¡ï¸ RLS: "users"
ALTER TABLE public.users ENABLE ROW LEVEL SECURITY;

CREATE POLICY "users_select_own" ON public.users
  FOR SELECT USING (auth.uid() = user_id);

CREATE POLICY "users_insert_own" ON public.users
  FOR INSERT WITH CHECK (auth.uid() = user_id);

CREATE POLICY "users_update_own" ON public.users
  FOR UPDATE USING (auth.uid() = user_id)
  WITH CHECK (auth.uid() = user_id);

CREATE POLICY "users_delete_own" ON public.users
  FOR DELETE USING (auth.uid() = user_id);

-- ğŸ›¡ï¸ RLS: "posts"
ALTER TABLE public.posts ENABLE ROW LEVEL SECURITY;

CREATE POLICY "posts_select_own" ON public.posts
  FOR SELECT USING (auth.uid() = user_id);

CREATE POLICY "posts_insert_own" ON public.posts
  FOR INSERT WITH CHECK (auth.uid() = user_id);

CREATE POLICY "posts_update_own" ON public.posts
  FOR UPDATE USING (auth.uid() = user_id)
  WITH CHECK (auth.uid() = user_id);

CREATE POLICY "posts_delete_own" ON public.posts
  FOR DELETE USING (auth.uid() = user_id);

-- ğŸ›¡ï¸ RLS: "comments"
ALTER TABLE public.comments ENABLE ROW LEVEL SECURITY;

CREATE POLICY "comments_select_own" ON public.comments
  FOR SELECT USING (auth.uid() = user_id);

CREATE POLICY "comments_insert_own" ON public.comments
  FOR INSERT WITH CHECK (auth.uid() = user_id);

CREATE POLICY "comments_update_own" ON public.comments
  FOR UPDATE USING (auth.uid() = user_id)
  WITH CHECK (auth.uid() = user_id);

CREATE POLICY "comments_delete_own" ON public.comments
  FOR DELETE USING (auth.uid() = user_id);

-- ğŸ›¡ï¸ RLS: "user_settings"
ALTER TABLE public.user_settings ENABLE ROW LEVEL SECURITY;

CREATE POLICY "user_settings_select_own" ON public.user_settings
  FOR SELECT USING (auth.uid() = user_id);

CREATE POLICY "user_settings_insert_own" ON public.user_settings
  FOR INSERT WITH CHECK (auth.uid() = user_id);

CREATE POLICY "user_settings_update_own" ON public.user_settings
  FOR UPDATE USING (auth.uid() = user_id)
  WITH CHECK (auth.uid() = user_id);

CREATE POLICY "user_settings_delete_own" ON public.user_settings
  FOR DELETE USING (auth.uid() = user_id);

-- ğŸ›¡ï¸ RLS: "private_messages"
ALTER TABLE public.private_messages ENABLE ROW LEVEL SECURITY;

CREATE POLICY "private_messages_select_own" ON public.private_messages
  FOR SELECT USING (auth.uid() = user_id);

CREATE POLICY "private_messages_insert_own" ON public.private_messages
  FOR INSERT WITH CHECK (auth.uid() = user_id);

CREATE POLICY "private_messages_update_own" ON public.private_messages
  FOR UPDATE USING (auth.uid() = user_id)
  WITH CHECK (auth.uid() = user_id);

CREATE POLICY "private_messages_delete_own" ON public.private_messages
  FOR DELETE USING (auth.uid() = user_id);

```

---
GÃ¼ncelleme: npm run security | Config: vibe-security.config.js